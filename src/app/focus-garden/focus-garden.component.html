<app-top-bar
  [username]="username"
  (settingsClicked)="goToSettings()"
  (logoutClicked)="logout()"
></app-top-bar>

<div class="layout">

  <!-- LEFT: GARDEN -->
  <div class="left-panel">
    <div class="garden-area">
      <div *ngFor="let plant of gardenItems"
           class="plant"
           [style.left.%]="plant.x"
           [style.top.%]="plant.y"
           [style.transform]="'translate(-50%, -50%) scale(' + plant.scale + ')'">

        <div class="tooltip-wrapper">
          <img [src]="plant.icon" class="tree-img" />

          <div class="tooltip">
            <div class="tooltip-line">
              <span class="label">Plantat:</span>
              <span class="value">{{ plant.plantedAt }}</span>
            </div>
            <div class="tooltip-line">
              <span class="label">Minute concentrate:</span>
              <span class="value">{{ plant.focusedMinutes }}</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- RIGHT: STATS -->
  <div class="right-panel">

    <div class="controls-wrapper">

      <div class="segment-control">
        <button [class.active]="mode === 'week'" (click)="setMode('week')">Săptămână</button>
        <button [class.active]="mode === 'month'" (click)="setMode('month')">Lună</button>
        <button [class.active]="mode === 'year'" (click)="setMode('year')">An</button>
      </div>

      <div class="interval-nav">
        <button (click)="prevInterval()">&lt;</button>
        <span>{{ intervalLabel }}</span>
        <button (click)="nextInterval()">&gt;</button>
      </div>

    </div>

    <div class="chart-card">
      <canvas id="focusChart"></canvas>
    </div>

    <div class="stats-row">
      <div class="stat-card">
        <h3>{{ totalSessions }}</h3>
        <p>Sesiuni</p>
      </div>

      <div class="stat-card">
        <h3>{{ completedSessions }}</h3>
        <p>Finalizate</p>
      </div>

      <div class="stat-card">
        <h3>{{ totalMinutes }}</h3>
        <p>Minute concentrate</p>
      </div>
    </div>

  </div>
</div>
